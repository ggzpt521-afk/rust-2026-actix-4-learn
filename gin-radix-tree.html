<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ·±åº¦è§£æï¼šGin (Radix Tree) vs Laravel (Hybrid Map/Regex)</title>
    <style>
        :root {
            --gin-color: #00add8;
            --gin-bg: #e6f7ff;
            --laravel-color: #ff2d20;
            --laravel-bg: #fff5f5;
            --terminal-bg: #2d2d2d;
            --bg-color: #f4f6f9;
            --card-bg: #ffffff;
            --text-color: #333;
            --success-color: #2ecc71;
            --map-color: #10b981; 
            --regex-color: #f59e0b;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            padding: 20px;
        }

        .container { max-width: 1100px; margin: 0 auto; }

        header {
            text-align: center;
            margin-bottom: 40px;
            padding: 40px;
            background: linear-gradient(135deg, #1e3c72, #2a5298);
            color: white;
            border-radius: 12px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }
        
        h1 { margin: 0; font-size: 2.5em; font-weight: 700; }
        .subtitle { opacity: 0.9; margin-top: 10px; font-weight: 300; font-size: 1.2em; }

        .card {
            background: var(--card-bg);
            padding: 30px;
            border-radius: 12px;
            margin-bottom: 30px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
            position: relative;
            overflow: hidden;
        }

        h2 { border-bottom: 2px solid #eee; padding-bottom: 15px; margin-top: 0; color: #2c3e50; }
        h3 { margin-top: 25px; color: #555; }

        /* Styles for Specific Sections */
        .card-terminal { border-top: 5px solid #333; }
        .card-gin { border-left: 6px solid var(--gin-color); }
        .card-gin h2 { color: #007bb6; }
        .card-laravel { border-left: 6px solid var(--laravel-color); }
        .card-laravel h2 { color: #d63031; }

        /* Terminal Code Block */
        .terminal {
            background: var(--terminal-bg);
            color: #ccc;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Consolas', monospace;
            margin: 10px 0;
            border-left: 4px solid #999;
        }
        .cmd { color: #fff; font-weight: bold; }
        .prompt { color: #2ecc71; }
        .output { color: #aaa; font-size: 0.9em; margin-top: 5px; display: block; }

        /* Diagrams & SVG */
        svg { width: 100%; height: auto; max-height: 300px; }
        .node-rect { fill: white; stroke: #333; stroke-width: 2px; rx: 5; }
        .node-text { font-family: monospace; font-size: 14px; text-anchor: middle; dominant-baseline: middle; }
        .edge { stroke: #666; stroke-width: 2px; fill: none; }
        .param-node { stroke: #e67e22; stroke-width: 2px; fill: #fff5e6; }

        /* Code/File Content */
        .code-box {
            font-family: 'Consolas', monospace;
            background: #282c34;
            color: #abb2bf;
            padding: 15px;
            border-radius: 6px;
            overflow-x: auto;
            font-size: 0.9em;
            line-height: 1.5;
        }
        .kw { color: #c678dd; } /* keyword */
        .str { color: #98c379; } /* string */
        .cmt { color: #5c6370; font-style: italic; } /* comment */
        .hl-map { background: rgba(16, 185, 129, 0.2); padding: 2px; border-radius: 2px; }
        .hl-regex { background: rgba(245, 158, 11, 0.2); padding: 2px; border-radius: 2px; }

        /* Flow Chart Styles */
        .flow-container {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        .box { padding: 10px 20px; border-radius: 6px; color: white; font-weight: bold; text-align: center; font-size: 0.9em; }
        .box-start { background: #34495e; }
        .box-map { background: var(--map-color); }
        .box-regex { background: var(--regex-color); }
        .arrow { color: #999; font-size: 1.2em; }

        /* Comparison Table */
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { padding: 15px; border-bottom: 1px solid #eee; text-align: left; }
        th { background-color: #f8f9fa; color: #555; }
        .winner { color: var(--gin-color); font-weight: bold; }
        .loser { color: #999; }
        
    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>Web æ¡†æ¶è·¯ç”±åŸç†å…¨æ™¯å›¾</h1>
        <div class="subtitle">ä»ç¼“å­˜æœºåˆ¶åˆ°ç®—æ³•æ ¸å¿ƒï¼šGin vs Laravel</div>
    </header>

    <div class="card card-terminal">
        <h2>0. å‰ç½®è§£å¯†ï¼šé‚£ä¸ªâ€œæ¶ˆå¤±â€çš„ routes-v7.php</h2>
        <p>å¾ˆå¤šå¼€å‘è€…åœ¨ <code>bootstrap/cache/</code> ä¸‹çœ‹ä¸åˆ°ç¼“å­˜æ–‡ä»¶ï¼Œæ˜¯å› ä¸º Laravel é»˜è®¤è¿è¡Œåœ¨<b>â€œå¼€å‘æ¨¡å¼â€</b>ã€‚</p>
        
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
            <div>
                <h3>ğŸ› ï¸ å¼€å‘æ¨¡å¼ (è£¸å¥”çŠ¶æ€)</h3>
                <p><b>ç°è±¡ï¼š</b> <code>bootstrap/cache/</code> æ˜¯ç©ºçš„ã€‚</p>
                <p><b>åŸç†ï¼š</b> æ¯æ¬¡è¯·æ±‚è¿›æ¥ï¼ŒPHP éƒ½ä¼šå®æ—¶è¯»å– <code>routes/web.php</code> å¹¶è§£æã€‚ä¿®æ”¹ä»£ç ç«‹å³ç”Ÿæ•ˆï¼Œä½†æ€§èƒ½ç•¥ä½ã€‚</p>
                <div class="terminal">
                    <span class="prompt">$</span> <span class="cmd">ls bootstrap/cache/</span><br>
                    <span class="output">packages.php services.php (æ— è·¯ç”±æ–‡ä»¶)</span>
                </div>
                <div class="terminal">
                    <span class="prompt">$</span> <span class="cmd">php artisan route:clear</span><br>
                    <span class="output">Route cache cleared! (å›åˆ°å¼€å‘æ¨¡å¼)</span>
                </div>
            </div>

            <div>
                <h3>ğŸš€ ç”Ÿäº§æ¨¡å¼ (ç¼“å­˜çŠ¶æ€)</h3>
                <p><b>ç°è±¡ï¼š</b> å‡ºç° <code>routes-v7.php</code>ã€‚</p>
                <p><b>åŸç†ï¼š</b> å°†è·¯ç”±è§£æç»“æœåºåˆ—åŒ–å­˜å…¥ç¡¬ç›˜ã€‚è¯·æ±‚è¿›æ¥ç›´æ¥è¯»è¿™ä¸ªæ–‡ä»¶ï¼Œä¸å†æ‰«æ <code>routes/</code> ç›®å½•ã€‚<b>æ€§èƒ½æœ€é«˜ã€‚</b></p>
                <div class="terminal">
                    <span class="prompt">$</span> <span class="cmd">php artisan route:cache</span><br>
                    <span class="output">Routes cached successfully!</span>
                </div>
                <div class="terminal">
                    <span class="prompt">$</span> <span class="cmd">ls bootstrap/cache/</span><br>
                    <span class="output" style="color:#e67e22; font-weight:bold;">routes-v7.php (å®ƒå‡ºç°äº†!)</span>
                </div>
            </div>
        </div>
    </div>

    <div class="card card-gin">
        <div style="position:absolute; top:20px; right:20px; font-weight:bold; color:var(--gin-color); opacity:0.1; font-size:4em;">GIN</div>
        <h2>1. Gin çš„åšæ³•ï¼šRadix Tree (å‰ç¼€æ ‘)</h2>
        <p>Gin çš„æ ¸å¿ƒç®—æ³•æ˜¯ <b>Radix Tree (åŸºæ•°æ ‘)</b>ã€‚å®ƒä¸å­˜å‚¨å®Œæ•´çš„ URLï¼Œè€Œæ˜¯å°† URL æ‹†è§£ä¸ºå…¬å…±å‰ç¼€ï¼Œæ„å»ºä¸€æ£µæ ‘ã€‚</p>
        
        <p><b>åœºæ™¯ï¼š</b> æ³¨å†Œè·¯ç”± <code>/search</code>, <code>/support</code>, <code>/blog/:id</code></p>

        <svg viewBox="0 0 600 280">
            <path d="M 50 140 L 150 140" class="edge" />
            <rect x="10" y="120" width="40" height="40" class="node-rect" />
            <text x="30" y="140" class="node-text">GET</text>

            <rect x="150" y="120" width="60" height="40" class="node-rect" />
            <text x="180" y="140" class="node-text">/</text>

            <path d="M 210 140 L 300 50" class="edge" /> 
            <path d="M 210 140 L 300 140" class="edge" /> 
            <path d="M 210 140 L 300 230" class="edge" /> 

            <rect x="300" y="30" width="100" height="40" class="node-rect" />
            <text x="350" y="50" class="node-text">search</text>

            <rect x="300" y="120" width="100" height="40" class="node-rect" />
            <text x="350" y="140" class="node-text">support</text>

            <rect x="300" y="210" width="80" height="40" class="node-rect" />
            <text x="340" y="230" class="node-text">blog/</text>

            <path d="M 380 230 L 450 230" class="edge" />
            <rect x="450" y="210" width="80" height="40" class="node-rect param-node" />
            <text x="490" y="230" class="node-text" fill="#d35400">:id</text>
        </svg>

        <div style="background: var(--gin-bg); padding: 15px; border-radius: 6px; margin-top: 15px;">
            <strong>âš¡ï¸ æ ¸å¿ƒä¼˜åŠ¿ï¼šæŸ¥å­—å…¸</strong><br>
            åŒ¹é… <code>/blog/1001</code> æ—¶ï¼š<br>
            1. åŒ¹é… <code>/</code> -> 2. åŒ¹é… <code>blog/</code> -> 3. å‰©ä¸‹çš„ <code>1001</code> æ”¾å…¥ <code>:id</code> èŠ‚ç‚¹ã€‚<br>
            <b>å¤æ‚åº¦ O(K)ï¼š</b> ä»…å–å†³äº URL é•¿åº¦ï¼Œä¸æ‹¥æœ‰ 10 ä¸ªè¿˜æ˜¯ 10 ä¸‡ä¸ªè·¯ç”±æ— å…³ã€‚
        </div>
    </div>

    <div class="card card-laravel">
        <div style="position:absolute; top:20px; right:20px; font-weight:bold; color:var(--laravel-color); opacity:0.1; font-size:4em;">Laravel</div>
        <h2>2. Laravel çš„çœŸç›¸ï¼šMap + Regex æ··åˆåŒæ‰“</h2>
        <p>æ‰§è¡Œ <code>php artisan route:cache</code> åç”Ÿæˆçš„ <code>routes-v7.php</code> æ–‡ä»¶ï¼Œæ­ç¤ºäº† Laravel è·¯ç”±çš„çœŸå®æ¶æ„ï¼š<b>é™æ€è·¯ç”±èµ° Mapï¼ŒåŠ¨æ€è·¯ç”±èµ°æ­£åˆ™ã€‚</b></p>

        <h3>ğŸ“‚ ç¼“å­˜æ–‡ä»¶ç»“æ„è§£å‰– (routes-v7.php)</h3>
        <div class="code-box">
<span class="kw">return</span> [
    <span class="cmt">// PART 1: é™æ€è·¯ç”± (Static Map)</span>
    <span class="cmt">// çº¯ Hash æŸ¥æ‰¾ï¼Œé€Ÿåº¦ O(1)ï¼Œæå…¶å¿«</span>
    <span class="str">'static_routes'</span> => [
        <span class="hl-map">'/login'</span> => [...],
        <span class="hl-map">'/about'</span> => [...],
        <span class="hl-map">'/api/user'</span> => [...],
    ],

    <span class="cmt">// PART 2: åŠ¨æ€è·¯ç”± (Merged Regex)</span>
    <span class="cmt">// æ‰€æœ‰å¸¦å‚æ•°çš„è·¯ç”±è¢«åˆå¹¶æˆä¸€ä¸ªâ€œå·¨å‹æ­£åˆ™â€</span>
    <span class="str">'regex'</span> => [
        <span class="hl-regex">'#^(?|/blog/([^/]++)(*:MARK:blog)|/user/([^/]++)(*:MARK:user)|...)$#x'</span> => [...]
    ],
];
        </div>

        <h3>ğŸš¦ åŒ¹é…æµç¨‹å›¾</h3>
        <div class="flow-container">
            <div class="box box-start">è¯·æ±‚è¿›æ¥</div>
            <div class="arrow">â†’</div>
            
            <div style="border: 2px dashed #ccc; padding: 10px; border-radius: 8px;">
                <div style="font-size:0.8em; color:#666; margin-bottom:5px;">ç¬¬ä¸€æ­¥ï¼šæŸ¥é™æ€è¡¨</div>
                <div class="box box-map">Static Map (Hash)</div>
            </div>

            <div class="arrow">Miss â†˜</div>
            
            <div style="border: 2px dashed #ccc; padding: 10px; border-radius: 8px;">
                <div style="font-size:0.8em; color:#666; margin-bottom:5px;">ç¬¬äºŒæ­¥ï¼šè·‘æ­£åˆ™</div>
                <div class="box box-regex">Merged Regex (PCRE)</div>
            </div>
        </div>

        <div style="background: var(--laravel-bg); padding: 15px; border-radius: 6px; margin-top: 20px;">
            <strong>ğŸ¢ æ€§èƒ½ç“¶é¢ˆï¼šåŠ¨æ€è·¯ç”±</strong><br>
            ä¸€æ—¦ URL ä¸­åŒ…å«å‚æ•°ï¼ˆå¦‚ <code>{id}</code>ï¼‰ï¼ŒMap å¤±æ•ˆï¼Œå¿…é¡»è¿›è¡Œæ­£åˆ™è¿ç®—ã€‚è™½ç„¶ Laravel åšäº†åˆå¹¶ä¼˜åŒ–ï¼Œä½†ç‰©ç†ä¸Šä¾ç„¶éœ€è¦æ‰«æå­—ç¬¦ä¸²ï¼Œå¼€é”€éšæ­£åˆ™é•¿åº¦å¢åŠ ã€‚
        </div>
    </div>

    <div class="card">
        <h2>3. ç»ˆæå¯¹æ¯”ï¼šæŸ¥å­—å…¸ vs ç¿»åå•</h2>
        
        <table>
            <thead>
                <tr>
                    <th width="20%">ç»´åº¦</th>
                    <th width="40%" style="color:var(--gin-color)">Gin (Go)</th>
                    <th width="40%" style="color:var(--laravel-color)">Laravel (PHP)</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><b>æ ¸å¿ƒæ•°æ®ç»“æ„</b></td>
                    <td><b>Radix Tree (åŸºæ•°æ ‘)</b><br><small>æ ‘çŠ¶ç»“æ„ï¼Œå±‚çº§åˆ†æ˜</small></td>
                    <td><b>Map + Regex (æ··åˆç»“æ„)</b><br><small>Hash è¡¨ + å·¨å‹æ­£åˆ™ä¸²</small></td>
                </tr>
                <tr>
                    <td><b>é™æ€è·¯ç”±</b><br>(/about)</td>
                    <td><b>æå¿«</b> (æ ‘æŸ¥æ‰¾)</td>
                    <td><b>æå¿«</b> (Hash æŸ¥æ‰¾ï¼Œç†è®ºä¸Š O(1))</td>
                </tr>
                <tr>
                    <td><b>åŠ¨æ€è·¯ç”±</b><br>(/user/{id})</td>
                    <td><b>æå¿«</b> (èŠ‚ç‚¹æˆªå–ï¼Œæ— å›é€€)</td>
                    <td><b>è¾ƒæ…¢</b> (å›é€€åˆ°æ­£åˆ™æ‰«æï¼ŒO(N))</td>
                </tr>
                <tr>
                    <td><b>å†…å­˜å ç”¨</b></td>
                    <td><span class="winner">æä½</span><br>å…¬å…±å‰ç¼€åªå­˜ä¸€ä»½ã€‚</td>
                    <td><span class="loser">è¾ƒé«˜</span><br>æ­£åˆ™å­—ç¬¦ä¸²å¾ˆé•¿ï¼Œå ç”¨å†…å­˜ã€‚</td>
                </tr>
                <tr>
                    <td><b>ç»“è®º</b></td>
                    <td><span class="winner">æŸ¥å­—å…¸</span><br>ç²¾å‡†å®šä½ï¼Œä¸€æ­¥åˆ°ä½ã€‚</td>
                    <td><span class="loser">çœ‹åå•</span><br>é™æ€çš„ä¸€çœ¼çœ‹åˆ°ï¼ŒåŠ¨æ€çš„è¦é€è¡Œæ¯”å¯¹ã€‚</td>
                </tr>
            </tbody>
        </table>
    </div>

</div>

</body>
</html>