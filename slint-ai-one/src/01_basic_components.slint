// ============================================================================
// 01_basic_components.slint - Slint 基础组件示例
// ============================================================================
//
// 【文件说明】
// 这是一个独立的 Slint UI 定义文件（.slint 文件）
// 可以通过以下两种方式在 Rust 中使用：
//
// 方式 1：使用 slint::include_modules!() 宏（推荐用于大型项目）
//   build.rs:
//     fn main() {
//         slint_build::compile("src/01_basic_components.slint").unwrap();
//     }
//   main.rs:
//     slint::include_modules!();
//     fn main() {
//         let app = BasicComponents::new().unwrap();
//         app.run().unwrap();
//     }
//
// 方式 2：使用 slint::slint! 宏内联（适合小型示例）
//   slint::slint! { /* 将此文件内容粘贴到这里 */ }
//
// 【与 .rs 文件的关联】
// - .slint 文件定义 UI 结构和样式（声明式）
// - .rs 文件实现业务逻辑（命令式）
// - 两者通过 属性(property) 和 回调(callback) 通信
// - Slint 编译器会为 export 的组件生成 Rust 结构体
//
// 【核心原理】
// Slint 使用声明式语法描述 UI：
// - 你描述"UI 是什么样子"，而不是"如何创建 UI"
// - 类似于 HTML/CSS，但更结构化
// - 编译时检查，避免运行时错误
// ============================================================================

// ============================================================================
// 组件声明
// ============================================================================
// export: 导出关键字，使组件可从 Rust 代码访问
// component: 组件关键字，定义一个 UI 组件
// BasicComponents: 组件名称，在 Rust 中变为同名结构体
//
// 【注意】Slint 1.x 版本中，顶级窗口组件应添加 `inherits Window`
// 当前文件是为了演示独立 .slint 文件的语法
// 实际运行时需要在 .rs 文件中使用 inherits Window
// ============================================================================
export component BasicComponents {
    // ========================================================================
    // 窗口属性
    // ========================================================================
    // width/height: 窗口尺寸
    // 单位说明：
    //   px: 像素（绝对单位）
    //   %:  百分比（相对于父元素）
    //   pt: 点（1pt = 1/72 英寸）
    //   无单位: 逻辑像素（会根据 DPI 缩放）
    width: 400px;      // 窗口宽度 400 像素
    height: 300px;     // 窗口高度 300 像素

    // ========================================================================
    // VerticalLayout - 垂直布局容器
    // ========================================================================
    // 将子元素从上到下垂直排列
    //
    // 【原理】
    // 布局容器会自动计算子元素的位置：
    // 1. 根据子元素的尺寸需求分配空间
    // 2. 使用 spacing 属性添加间距
    // 3. 使用 padding 属性添加内边距
    //
    // 【对应 Rust 代码】
    // 布局容器是纯 UI 概念，不生成 Rust API
    // 但布局中的属性绑定会影响 Rust 可访问的数据
    VerticalLayout {
        // padding: 内边距，容器边缘到内容的距离
        // 可以分别设置：padding-left, padding-right, padding-top, padding-bottom
        padding: 20px;

        // spacing: 子元素之间的间距
        spacing: 15px;

        // ====================================================================
        // Text 组件 - 文本显示
        // ====================================================================
        // 用于显示静态或动态文本
        //
        // 【属性说明】
        // - text: 显示的文本内容（string 类型）
        // - font-size: 字体大小
        // - font-weight: 字重（normal, bold, 100-900）
        // - color: 文本颜色
        // - horizontal-alignment: 水平对齐（left, center, right）
        // - vertical-alignment: 垂直对齐（top, center, bottom）
        //
        // 【颜色格式】
        // - 十六进制：#RGB, #RRGGBB, #RRGGBBAA
        // - 命名颜色：red, blue, green, white, black 等
        // - RGB 函数：rgb(r, g, b), rgba(r, g, b, a)
        Text {
            text: "Slint 基础组件示例";  // 静态文本
            font-size: 24px;              // 24 像素字号
            font-weight: bold;            // 粗体
            color: #333;                  // 深灰色（#333333 的简写）
            horizontal-alignment: center; // 水平居中
        }

        // ====================================================================
        // Button 组件 - 按钮
        // ====================================================================
        // 可点击的按钮组件
        //
        // 【属性说明】
        // - text: 按钮文本
        // - enabled: 是否启用（bool）
        // - width/height: 按钮尺寸
        //
        // 【事件回调】
        // - clicked => { ... }: 点击事件处理
        //
        // 【与 Rust 交互】
        // 按钮本身不生成 Rust API
        // 但可以在 clicked 事件中调用 callback，由 Rust 处理
        Button {
            text: "点击我";               // 按钮显示文本
            width: 120px;                 // 按钮宽度
            // horizontal-alignment 在 Button 上下文中无效
            // 应该在父布局中使用 alignment 属性
        }

        // ====================================================================
        // LineEdit 组件 - 单行文本输入框
        // ====================================================================
        // 用于用户输入文本
        //
        // 【属性说明】
        // - text: 输入框中的文本（可双向绑定）
        // - placeholder-text: 占位提示文本
        // - input-type: 输入类型（text, password, number）
        // - read-only: 是否只读
        //
        // 【事件回调】
        // - edited => { ... }: 文本编辑时触发
        // - accepted => { ... }: 按下回车时触发
        //
        // 【双向绑定原理】
        // 1. text: user-input;           // 属性 → UI
        // 2. edited => { user-input = self.text; }  // UI → 属性
        LineEdit {
            placeholder-text: "请输入文本";  // 未输入时显示的提示
            width: 250px;                    // 输入框宽度
        }

        // ====================================================================
        // HorizontalLayout - 水平布局容器
        // ====================================================================
        // 将子元素从左到右水平排列
        //
        // 【属性说明】
        // - spacing: 子元素间距
        // - alignment: 子元素对齐方式（start, center, end, stretch）
        //   注意：不是 horizontal-alignment
        //
        // 【与 VerticalLayout 对比】
        // - VerticalLayout: 垂直方向排列
        // - HorizontalLayout: 水平方向排列
        // - 两者可以嵌套使用，构建复杂布局
        HorizontalLayout {
            spacing: 10px;          // 子元素间距
            alignment: center;      // 子元素在布局中居中

            // ================================================================
            // CheckBox 组件 - 复选框
            // ================================================================
            // 用于多选场景
            //
            // 【属性说明】
            // - text: 复选框标签
            // - checked: 是否选中（bool）
            //
            // 【事件回调】
            // - toggled => { ... }: 选中状态变化时触发
            //
            // 【与 Rust 交互】
            // 如果需要在 Rust 中访问选中状态：
            // 1. 定义组件属性：in-out property <bool> is-checked;
            // 2. 绑定：checked: is-checked;
            // 3. Rust 中：app.get_is_checked() / app.set_is_checked(true);
            CheckBox {
                text: "选项 1";      // 复选框标签
            }

            CheckBox {
                text: "选项 2";
                checked: true;       // 默认选中
            }
        }

        // ====================================================================
        // RadioButton 组件 - 单选按钮
        // ====================================================================
        // 用于互斥选择场景（同一组中只能选一个）
        //
        // 【属性说明】
        // - text: 单选按钮标签
        // - checked: 是否选中（bool）
        //
        // 【事件回调】
        // - toggled => { ... }: 选中状态变化时触发
        //
        // 【单选组原理】
        // Slint 中没有显式的 RadioGroup
        // 需要手动管理选中状态的互斥：
        // toggled => {
        //     option1-selected = self.checked;
        //     if self.checked { option2-selected = false; }
        // }
        HorizontalLayout {
            spacing: 10px;
            alignment: center;

            RadioButton {
                text: "单选 1";
                checked: true;       // 默认选中第一个
            }

            RadioButton {
                text: "单选 2";
            }
        }

        // ====================================================================
        // Slider 组件 - 滑块
        // ====================================================================
        // 用于选择数值范围内的值
        //
        // 【属性说明】
        // - value: 当前值（float 或 int）
        // - minimum: 最小值（默认 0）
        // - maximum: 最大值（默认 100）
        // - orientation: 方向（horizontal, vertical）
        //
        // 【事件回调】
        // - changed => { ... }: 值变化时触发
        //
        // 【双向绑定示例】
        // property <int> slider-value: 50;
        // Slider {
        //     value: slider-value;
        //     changed => { slider-value = self.value; }
        // }
        Slider {
            width: 200px;            // 滑块宽度
            value: 50;               // 初始值（范围 0-100）
        }
    }
}

// ============================================================================
// 【知识点总结】
// ============================================================================
//
// 1. 组件声明
//    export component Name { }       - 导出组件（Rust 可访问）
//    component Name { }              - 内部组件（Rust 不可访问）
//    export component Name inherits Window { }  - 顶级窗口组件
//
// 2. 基础组件
//    Text      - 文本显示
//    Button    - 按钮
//    LineEdit  - 单行输入
//    CheckBox  - 复选框
//    RadioButton - 单选按钮
//    Slider    - 滑块
//    Rectangle - 矩形（背景、边框）
//
// 3. 布局容器
//    VerticalLayout   - 垂直布局
//    HorizontalLayout - 水平布局
//    GridLayout       - 网格布局
//
// 4. 常用属性
//    width, height     - 尺寸
//    padding, spacing  - 间距
//    background        - 背景色
//    color             - 文本颜色
//    font-size         - 字体大小
//    alignment         - 对齐方式
//
// 5. .slint 与 .rs 的关系
//    .slint: 声明式 UI 定义
//    .rs:    命令式业务逻辑
//    桥梁:   property（属性）和 callback（回调）
// ============================================================================
