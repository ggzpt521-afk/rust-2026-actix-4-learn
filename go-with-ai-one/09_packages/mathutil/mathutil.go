// ============================================================================
// Package mathutil 提供数学工具函数
// ============================================================================
// 这是一个示例包，展示 Go 的包管理机制
//
// 【包的作用】
// 封装常用的数学运算函数，供其他包导入使用
//
// 【导入方式】
// import "example.com/packages/mathutil"
// 使用：mathutil.Add(1, 2)
//
// 【本文件学习目标】
// 1. 理解包的定义和导出规则
// 2. 掌握函数的导出与私有
// 3. 了解包级变量和常量
// 4. 学会编写可复用的工具包
//
// 【导出规则】
// - 大写开头：导出（公开），其他包可访问
// - 小写开头：私有，只有包内可访问
// - 适用于：函数、类型、变量、常量、方法
// ============================================================================
package mathutil

import "math"

// ============================================================================
// 【基本算术函数】
// ============================================================================
// 这些函数都是导出的（大写开头），可以被其他包使用
// ============================================================================

// Add 返回两个整数的和
// 函数名大写开头，表示导出（公开）
func Add(a, b int) int {
	return a + b
}

// Subtract 返回两个整数的差
func Subtract(a, b int) int {
	return a - b
}

// Multiply 返回两个整数的积
func Multiply(a, b int) int {
	return a * b
}

// Divide 返回两个浮点数的商
// 如果除数为零，返回 0（简单处理，实际应返回 error）
func Divide(a, b float64) float64 {
	if b == 0 {
		return 0 // 避免除零错误
	}
	return a / b
}

// ============================================================================
// 【比较函数】
// ============================================================================

// Max 返回两个整数中的较大值
func Max(a, b int) int {
	if a > b {
		return a
	}
	return b
}

// Min 返回两个整数中的较小值
func Min(a, b int) int {
	if a < b {
		return a
	}
	return b
}

// Abs 返回整数的绝对值
func Abs(n int) int {
	if n < 0 {
		return -n
	}
	return n
}

// ============================================================================
// 【幂运算】
// ============================================================================

// Pow 返回 base 的 exp 次方
// 注意：这里使用 math.Pow 并转换为 int，会丢失精度
func Pow(base, exp int) int {
	return int(math.Pow(float64(base), float64(exp)))
}

// ============================================================================
// 【奇偶判断】
// ============================================================================

// IsEven 判断是否为偶数
// 使用位运算 n&1 == 0 也可以判断，但取模更清晰
func IsEven(n int) bool {
	return n%2 == 0
}

// IsOdd 判断是否为奇数
func IsOdd(n int) bool {
	return n%2 != 0
}

// ============================================================================
// 【递归函数示例】
// ============================================================================

// Factorial 计算阶乘
// n! = n × (n-1) × ... × 1
// 0! = 1, 1! = 1
//
// 【注意】
// - 输入太大会导致整数溢出
// - 实际应用中应该检查边界条件
func Factorial(n int) int {
	if n <= 1 {
		return 1 // 基准情况
	}
	return n * Factorial(n-1) // 递归调用
}

// ============================================================================
// 【数论函数】
// ============================================================================

// GCD 计算最大公约数（Greatest Common Divisor）
// 使用欧几里得算法（辗转相除法）
//
// 【算法原理】
// gcd(a, b) = gcd(b, a mod b)
// gcd(a, 0) = a
func GCD(a, b int) int {
	for b != 0 {
		a, b = b, a%b // Go 支持同时赋值
	}
	return a
}

// LCM 计算最小公倍数（Least Common Multiple）
// 公式：lcm(a, b) = a × b / gcd(a, b)
func LCM(a, b int) int {
	return a * b / GCD(a, b)
}

// ============================================================================
// 【私有函数和变量】
// ============================================================================
// 小写开头的标识符是私有的，只能在包内使用
// 外部包无法访问这些内容
// ============================================================================

// helper: 私有辅助函数（小写开头，包外不可访问）
// 外部调用 mathutil.helper() 会编译错误
func helper() int {
	return 42
}

// internalValue: 私有变量
// 可以在包内的其他文件中访问，但外部包不能访问
var internalValue = 100

// ============================================================================
// 【导出的常量】
// ============================================================================
// 常量使用 const 声明
// 大写开头表示导出，可以被其他包使用
// 使用：mathutil.Pi, mathutil.E
// ============================================================================

// 导出的常量
const (
	Pi = 3.14159265358979 // 圆周率
	E  = 2.71828182845904 // 自然对数的底
)

// ============================================================================
// 【导出的变量】
// ============================================================================
// 虽然可以导出变量，但通常不推荐
// 因为包外可以修改它，破坏封装性
// 更好的做法是使用函数提供访问
// ============================================================================

// Version: 导出的变量（通常不推荐，因为可被外部修改）
// 更好的做法是：
// func Version() string { return version }
// var version = "1.0.0"
var Version = "1.0.0"
