// 02_data_types.rs - Rustæ•°æ®ç±»å‹è¯¦è§£

pub fn run_example() {
    println!("=== Rustå­¦ä¹ ç¤ºä¾‹ ===\n");
    // 1. æ ‡é‡ç±»å‹ï¼ˆScalar Typesï¼‰
    // æ ‡é‡ç±»å‹ä»£è¡¨å•ä¸ªå€¼
    
    // 1.1 æ•´æ•°ç±»å‹
    // æ•´æ•°æ˜¯æ²¡æœ‰å°æ•°éƒ¨åˆ†çš„æ•°å­—
    // Rustæä¾›äº†å¤šç§æ•´æ•°ç±»å‹ï¼Œæ ¹æ®ä½æ•°å’Œæœ‰ç¬¦å·/æ— ç¬¦å·æ¥åŒºåˆ†
    
    // æœ‰ç¬¦å·æ•´æ•°ï¼ˆå¯ä»¥è¡¨ç¤ºè´Ÿæ•°ï¼‰
    let i8_value: i8 = -128;     // 8ä½æœ‰ç¬¦å·æ•´æ•°ï¼ŒèŒƒå›´ï¼š-128 åˆ° 127
    let i16_value: i16 = -32768;  // 16ä½æœ‰ç¬¦å·æ•´æ•°
    let i32_value: i32 = -2147483648;  // 32ä½æœ‰ç¬¦å·æ•´æ•°ï¼ˆé»˜è®¤æ•´æ•°ç±»å‹ï¼‰
    let i64_value: i64 = -9223372036854775808;  // 64ä½æœ‰ç¬¦å·æ•´æ•°
    let i128_value: i128 = -170141183460469231731687303715884105728;  // 128ä½æœ‰ç¬¦å·æ•´æ•°
    
    // æ— ç¬¦å·æ•´æ•°ï¼ˆåªèƒ½è¡¨ç¤ºæ­£æ•°ï¼‰
    let u8_value: u8 = 255;      // 8ä½æ— ç¬¦å·æ•´æ•°ï¼ŒèŒƒå›´ï¼š0 åˆ° 255
    let u16_value: u16 = 65535;   // 16ä½æ— ç¬¦å·æ•´æ•°
    let u32_value: u32 = 4294967295;   // 32ä½æ— ç¬¦å·æ•´æ•°
    let u64_value: u64 = 18446744073709551615;   // 64ä½æ— ç¬¦å·æ•´æ•°
    let u128_value: u128 = 340282366920938463463374607431768211455;   // 128ä½æ— ç¬¦å·æ•´æ•°
    
    // æ¶æ„ç›¸å…³çš„æ•´æ•°ç±»å‹
    let isize_value: isize = -1;  // æŒ‡é’ˆå¤§å°çš„æœ‰ç¬¦å·æ•´æ•°
    let usize_value: usize = 1;   // æŒ‡é’ˆå¤§å°çš„æ— ç¬¦å·æ•´æ•°ï¼ˆç”¨äºç´¢å¼•ï¼‰
    
    println!("æ•´æ•°ç±»å‹ç¤ºä¾‹ï¼š");
    println!("i8: {}, u8: {}", i8_value, u8_value);
    println!("i32(é»˜è®¤): {}, u32: {}", i32_value, u32_value);
    
    // æ•´æ•°å­—é¢é‡
    let decimal = 98_222;  // åè¿›åˆ¶
    let hex = 0xff;        // åå…­è¿›åˆ¶
    let octal = 0o77;      // å…«è¿›åˆ¶
    let binary = 0b1111_0000;  // äºŒè¿›åˆ¶
    let byte = b'A';       // å­—èŠ‚å­—é¢é‡ï¼ˆä»…u8ï¼‰
    
    println!("\næ•´æ•°å­—é¢é‡ç¤ºä¾‹ï¼š");
    println!("åè¿›åˆ¶: {}, åå…­è¿›åˆ¶: {}, å…«è¿›åˆ¶: {}, äºŒè¿›åˆ¶: {}, å­—èŠ‚: {}", 
             decimal, hex, octal, binary, byte);
    
    // 1.2 æµ®ç‚¹æ•°ç±»å‹
    // æµ®ç‚¹æ•°æ˜¯å¸¦æœ‰å°æ•°éƒ¨åˆ†çš„æ•°å­—
    let f32_value: f32 = 2.0;     // 32ä½æµ®ç‚¹æ•°ï¼ˆå•ç²¾åº¦ï¼‰
    let f64_value: f64 = 3.14159;  // 64ä½æµ®ç‚¹æ•°ï¼ˆåŒç²¾åº¦ï¼Œé»˜è®¤æµ®ç‚¹ç±»å‹ï¼‰
    
    println!("\næµ®ç‚¹æ•°ç±»å‹ç¤ºä¾‹ï¼š");
    println!("f32: {}, f64(é»˜è®¤): {}", f32_value, f64_value);
    
    // 1.3 å¸ƒå°”ç±»å‹
    // å¸ƒå°”ç±»å‹åªæœ‰ä¸¤ä¸ªå¯èƒ½çš„å€¼ï¼štrue å’Œ false
    let is_active: bool = true;
    let is_closed: bool = false;
    
    println!("\nå¸ƒå°”ç±»å‹ç¤ºä¾‹ï¼š");
    println!("is_active: {}, is_closed: {}", is_active, is_closed);
    
    // 1.4 å­—ç¬¦ç±»å‹
    // å­—ç¬¦ç±»å‹è¡¨ç¤ºå•ä¸ªUnicodeå­—ç¬¦ï¼Œä½¿ç”¨å•å¼•å·
    // Rustçš„charç±»å‹æ˜¯4å­—èŠ‚å¤§å°ï¼Œå¯ä»¥è¡¨ç¤ºUnicodeæ ‡é‡å€¼
    let char_a: char = 'a';
    let char_emoji: char = 'ğŸ˜€';
    let char_chinese: char = 'ä¸­';
    let char_special: char = '\u{1F600}';  // Unicodeè½¬ä¹‰åºåˆ—
    
    println!("\nå­—ç¬¦ç±»å‹ç¤ºä¾‹ï¼š");
    println!("è‹±æ–‡å­—ç¬¦: {}, ä¸­æ–‡: {}, Emoji: {}, Unicodeè½¬ä¹‰: {}", 
             char_a, char_chinese, char_emoji, char_special);
    
    // 2. å¤åˆç±»å‹ï¼ˆCompound Typesï¼‰
    // å¤åˆç±»å‹å¯ä»¥å°†å¤šä¸ªå€¼ç»„åˆæˆä¸€ä¸ªç±»å‹
    
    // 2.1 å…ƒç»„ç±»å‹
    // å…ƒç»„æ˜¯ä¸åŒç±»å‹å€¼çš„é›†åˆï¼Œé•¿åº¦å›ºå®š
    let tuple: (i32, f64, bool, char) = (500, 6.4, true, 'x');
    
    println!("\nå…ƒç»„ç±»å‹ç¤ºä¾‹ï¼š");
    println!("å…ƒç»„æ•´ä½“: {:?}", tuple);
    
    // è®¿é—®å…ƒç»„å…ƒç´ 
    // æ–¹æ³•1ï¼šä½¿ç”¨æ¨¡å¼åŒ¹é…è§£æ„å…ƒç»„
    let (x, y, z, w) = tuple;
    println!("è§£æ„å…ƒç»„: x={}, y={}, z={}, w={}", x, y, z, w);
    
    // æ–¹æ³•2ï¼šä½¿ç”¨ç‚¹å·ï¼ˆ.ï¼‰å’Œç´¢å¼•è®¿é—®
    println!("å…ƒç»„ç¬¬ä¸€ä¸ªå…ƒç´ : {}", tuple.0);
    println!("å…ƒç»„ç¬¬äºŒä¸ªå…ƒç´ : {}", tuple.1);
    println!("å…ƒç»„ç¬¬ä¸‰ä¸ªå…ƒç´ : {}", tuple.2);
    println!("å…ƒç»„ç¬¬å››ä¸ªå…ƒç´ : {}", tuple.3);
    
    // ç©ºå…ƒç»„ï¼ˆå•å…ƒç±»å‹ï¼‰
    let unit: () = ();
    println!("ç©ºå…ƒç»„: {:?}", unit);
    
    // 2.2 æ•°ç»„ç±»å‹
    // æ•°ç»„æ˜¯ç›¸åŒç±»å‹å€¼çš„é›†åˆï¼Œé•¿åº¦å›ºå®š
    let numbers: [i32; 5] = [1, 2, 3, 4, 5];  // ç±»å‹æ ‡æ³¨ï¼š[å…ƒç´ ç±»å‹; é•¿åº¦]
    let same_values = [3; 5];  // åˆå§‹åŒ–5ä¸ªå…ƒç´ ï¼Œæ¯ä¸ªå…ƒç´ éƒ½æ˜¯3
    
    println!("\næ•°ç»„ç±»å‹ç¤ºä¾‹ï¼š");
    println!("æ•°å­—æ•°ç»„: {:?}", numbers);
    println!("ç›¸åŒå€¼æ•°ç»„: {:?}", same_values);
    
    // è®¿é—®æ•°ç»„å…ƒç´ 
    println!("æ•°ç»„ç¬¬ä¸€ä¸ªå…ƒç´ : {}", numbers[0]);
    println!("æ•°ç»„ç¬¬ä¸‰ä¸ªå…ƒç´ : {}", numbers[2]);
    
    // å°è¯•è®¿é—®è¶…å‡ºèŒƒå›´çš„å…ƒç´ ä¼šå¯¼è‡´è¿è¡Œæ—¶é”™è¯¯
    // println!("æ•°ç»„ç¬¬å…­ä¸ªå…ƒç´ : {}", numbers[5]); // è¿™ä¼šå¯¼è‡´panic
    
    // æ•°ç»„é•¿åº¦
    println!("æ•°ç»„é•¿åº¦: {}", numbers.len());
    
    // 3. ç±»å‹æ¨æ–­
    // Rustç¼–è¯‘å™¨é€šå¸¸å¯ä»¥æ¨æ–­å‡ºå˜é‡çš„ç±»å‹
    let inferred_int = 10;     // æ¨æ–­ä¸ºi32
    let inferred_float = 10.0;  // æ¨æ–­ä¸ºf64
    let inferred_bool = true;   // æ¨æ–­ä¸ºbool
    let inferred_char = 'a';    // æ¨æ–­ä¸ºchar
    
    println!("\nç±»å‹æ¨æ–­ç¤ºä¾‹ï¼š");
    println!("inferred_int: {} (ç±»å‹: i32)", inferred_int);
    println!("inferred_float: {} (ç±»å‹: f64)", inferred_float);
    println!("inferred_bool: {} (ç±»å‹: bool)", inferred_bool);
    println!("inferred_char: {} (ç±»å‹: char)", inferred_char);
}

// 4. åˆ‡ç‰‡ç±»å‹ï¼ˆSlice Typesï¼‰
// åˆ‡ç‰‡æ˜¯å¯¹æ•°ç»„çš„å¼•ç”¨ï¼Œå…è®¸å¼•ç”¨æ•°ç»„ä¸­ä¸€æ®µè¿ç»­çš„å…ƒç´ åºåˆ—
// åˆ‡ç‰‡æ˜¯åŠ¨æ€å¤§å°çš„ç±»å‹ï¼Œå› æ­¤å¿…é¡»é€šè¿‡å¼•ç”¨ä½¿ç”¨
fn slice_example() {
    let numbers = [1, 2, 3, 4, 5];
    
    // åˆ›å»ºåˆ‡ç‰‡ï¼š&[èµ·å§‹ç´¢å¼•..ç»“æŸç´¢å¼•]
    // æ³¨æ„ï¼šç»“æŸç´¢å¼•æ˜¯ç‹¬å çš„
    let slice1 = &numbers[1..4];  // åŒ…å«ç´¢å¼•1, 2, 3çš„å…ƒç´ 
    let slice2 = &numbers[..3];   // ä»å¼€å§‹åˆ°ç´¢å¼•3ï¼ˆä¸åŒ…å«ï¼‰
    let slice3 = &numbers[2..];   // ä»ç´¢å¼•2åˆ°ç»“æŸ
    let slice4 = &numbers[..];    // æ•´ä¸ªæ•°ç»„çš„åˆ‡ç‰‡
    
    println!("\nåˆ‡ç‰‡ç±»å‹ç¤ºä¾‹ï¼š");
    println!("åŸæ•°ç»„: {:?}", numbers);
    println!("åˆ‡ç‰‡1 (1..4): {:?}", slice1);
    println!("åˆ‡ç‰‡2 (..3): {:?}", slice2);
    println!("åˆ‡ç‰‡3 (2..): {:?}", slice3);
    println!("åˆ‡ç‰‡4 (..): {:?}", slice4);
    
    // å­—ç¬¦ä¸²åˆ‡ç‰‡ï¼ˆString Slicesï¼‰
    let s = String::from("hello world");
    let hello = &s[0..5];      // "hello"
    let world = &s[6..11];     // "world"
    let whole = &s[..];        // æ•´ä¸ªå­—ç¬¦ä¸²
    
    println!("\nå­—ç¬¦ä¸²åˆ‡ç‰‡ç¤ºä¾‹ï¼š");
    println!("åŸå­—ç¬¦ä¸²: {}", s);
    println!("helloåˆ‡ç‰‡: {}", hello);
    println!("worldåˆ‡ç‰‡: {}", world);
    println!("æ•´ä¸ªå­—ç¬¦ä¸²åˆ‡ç‰‡: {}", whole);
}
// ç”¨äºå•ç‹¬è¿è¡Œæœ¬æ–‡ä»¶çš„mainå‡½æ•°
fn main() {
    run_example();
}
